# 3.6 Mobile and Accessibility Baseline for New Admin/Committee UI

**Status:** Open
**Roadmap:** [SRS_IMPLEMENTATION_ROADMAP.md](../SRS_IMPLEMENTATION_ROADMAP.md) Future considerations + Tier 3 quality gate
**Effort:** 0.5–1 day
**Depends on:** [3.1 Jurisdiction Assignment UI](3.1-jurisdiction-assignment-ui.md), [3.5 Audit Trail UI and Export](3.5-audit-trail-ui-export.md)

## Summary

Create and apply a baseline accessibility/mobile checklist to all new Tier 2/3 UI workflows. This is a quality gate — no new UI ships without passing the checklist. Not a full accessibility audit (that's post-v1), but a minimum bar for usability.

## Current State

- **Mobile layout** — The app has basic responsive patterns:
  - Header tabs use `overflow-x-auto` for horizontal scroll on mobile.
  - Admin sidebar switches to a hamburger menu (Sheet component) on mobile (< md breakpoint).
  - Most pages use Tailwind responsive classes but vary in quality.
- **Accessibility** — No formal a11y patterns are enforced:
  - shadcn/ui components (Dialog, Sheet, ComboboxDropdown) have built-in ARIA support.
  - Custom components (CommitteeSelector, various forms) do not consistently use ARIA labels.
  - No skip-navigation link.
  - No screen reader announcements for async status changes.
- **Color contrast** — Warning states use custom amber/yellow classes; error states use `text-destructive`. No formal contrast ratio verification.

## Acceptance Criteria

### Checklist Document
- [ ] Create `docs/SRS/ACCESSIBILITY_MOBILE_CHECKLIST.md` with the following sections:

#### 1. Keyboard Navigation
- [ ] All interactive elements are reachable via Tab key in logical order.
- [ ] Focus is visible on all interactive elements (outline or ring).
- [ ] Modals/dialogs trap focus (Tab cycles within modal, Escape closes).
- [ ] Dropdown menus support arrow key navigation.
- [ ] Forms can be submitted with Enter key.
- [ ] No keyboard traps (user can always navigate away).

#### 2. ARIA Labels & Semantics
- [ ] All form inputs have associated `<label>` elements or `aria-label`.
- [ ] Required fields are marked with `aria-required="true"`.
- [ ] Error messages are linked to inputs via `aria-describedby`.
- [ ] Dialog components use `role="dialog"` and `aria-labelledby` (shadcn Dialog does this by default).
- [ ] Tables use `<th>` headers with `scope="col"` or `scope="row"`.
- [ ] Icon-only buttons have `aria-label` (e.g., close, delete, menu toggle).
- [ ] Landmark regions (`<main>`, `<nav>`, `<aside>`) are used correctly.

#### 3. Status & Announcement
- [ ] Async operations (report generation, form submission) announce status to screen readers via `aria-live="polite"` region or toast announcements.
- [ ] Error messages on form submission are announced (not just visually displayed).
- [ ] Loading states have `aria-busy="true"` on the loading container.
- [ ] Success/failure toasts are announced (Toaster component should handle this — verify).

#### 4. Touch Targets & Responsive Layout
- [ ] All clickable/tappable elements are at least 44×44px on mobile (WCAG 2.5.5).
- [ ] Buttons in action menus have adequate spacing (no accidental taps).
- [ ] Tables scroll horizontally on mobile (not overflow-hidden or truncated to uselessness).
- [ ] Forms stack vertically on mobile (no side-by-side inputs that become too narrow).
- [ ] Modals/drawers are usable on mobile (full-width on small screens, dismissible).
- [ ] Admin sidebar hamburger menu works correctly on touch.

#### 5. Color Contrast
- [ ] Text meets WCAG AA contrast ratio (4.5:1 for normal text, 3:1 for large text).
- [ ] Warning badges (`bg-amber-100 text-amber-800`) pass contrast check.
- [ ] Error states (`text-destructive`) pass contrast check.
- [ ] "Coming soon" badges (muted) pass contrast check.
- [ ] Badge text on colored backgrounds passes contrast check.
- [ ] Focus indicators have sufficient contrast against their background.

### Apply Checklist to Tier 2/3 UI Pages
- [ ] **CommitteeSelector** (`/committees`):
  - ComboboxDropdown: Verify keyboard navigation (arrow keys, Enter to select, Escape to close).
  - Member cards: Verify action buttons have labels.
  - Modals (remove, resign): Verify focus trapping and Escape dismissal.
  - Mobile: Verify selector dropdowns stack and member list scrolls.
  - Document pass/fail per checklist item.
- [ ] **Admin Users / Jurisdiction Assignment** (`/admin/users`, from 3.1):
  - User table: Verify keyboard navigable.
  - Jurisdiction add form: Verify labels and validation announcements.
  - Mobile: Verify table scrolls, form stacks.
- [ ] **Audit Trail** (`/admin/audit`, from 3.5):
  - Filter bar: Verify keyboard navigation between filters.
  - Table: Verify row click works with keyboard (Enter on focused row).
  - Detail drawer: Verify focus trapping and Escape dismissal.
  - Mobile: Verify table scrolls, drawer goes full-width.
- [ ] **Report Forms** (from 3.2, 3.3, 3.4):
  - Scope radio group: Verify keyboard switching.
  - Jurisdiction dropdowns: Verify labels.
  - Date pickers: Verify keyboard input.
  - Mobile: Verify forms stack vertically.
- [ ] **Meetings** (`/admin/meetings`):
  - Bulk decision checkboxes: Verify keyboard toggle.
  - Mobile: Verify table/list is usable.
- [ ] **Petition Outcomes** (`/admin/petition-outcomes`):
  - Candidate form: Verify keyboard navigation and submission.
  - Mobile: Verify form is usable.

### Track Issues
- [ ] For each page, record pass/fail results in a summary table at the bottom of the checklist doc.
- [ ] Create follow-up tickets for any failing items that cannot be fixed immediately.
- [ ] Categorize failures as: Critical (blocks usage), Major (significantly degrades UX), Minor (cosmetic/enhancement).

## Implementation Steps

1. **Create checklist document** — Write `docs/SRS/ACCESSIBILITY_MOBILE_CHECKLIST.md` with the 5 sections above.
2. **Audit each page** — Go through each Tier 2/3 UI page with the checklist (manual testing with keyboard + screen reader + mobile viewport).
3. **Fix quick wins** — Address any failures that take < 30 minutes each:
   - Add missing `aria-label` attributes.
   - Add `aria-live` regions for async status updates.
   - Fix touch target sizes (padding adjustments).
   - Add `scope` to table headers.
4. **Document results** — Record pass/fail per page in the checklist doc.
5. **Create follow-up tickets** — For issues that require more work.

## Specific Quick Fixes (Likely Needed)

Based on current codebase patterns, these are likely fixes:

| Issue | Location | Fix |
|-------|----------|-----|
| Missing aria-label on icon buttons | CommitteeSelector (remove/resign buttons) | Add `aria-label="Remove member"` etc. |
| No aria-live for committee fetch | CommitteeSelector `listLoading` state | Add `aria-live="polite"` on member list container |
| Table headers missing scope | Audit trail table, meeting table | Add `scope="col"` to `<th>` elements |
| Small touch targets | Action buttons in member cards | Add `min-h-[44px] min-w-[44px]` |
| Missing skip-nav link | Global layout | Add "Skip to main content" link before header |
| No focus management on modal open | Remove/resign modals | Verify Dialog component moves focus (shadcn should handle) |

## Files to Create

| File | Purpose |
|------|---------|
| `docs/SRS/ACCESSIBILITY_MOBILE_CHECKLIST.md` | Reusable checklist + per-page audit results |

## Files to Modify (Likely)

| File | Likely Change |
|------|---------------|
| `apps/frontend/src/app/committees/CommitteeSelector.tsx` | Add ARIA labels, aria-live region |
| `apps/frontend/src/app/layout.tsx` | Add skip-navigation link |
| Various table components | Add `scope="col"` to `<th>` |
| Various button components | Add `aria-label` to icon-only buttons |

## Related

- [SRS_UI_PLANNING_GAPS.md](../SRS_UI_PLANNING_GAPS.md) §17
- [SRS_IMPLEMENTATION_ROADMAP.md](../SRS_IMPLEMENTATION_ROADMAP.md) — Future Considerations (Accessibility)
