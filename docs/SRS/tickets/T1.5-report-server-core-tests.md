# T1.5 Report-Server Core Tests

**Status:** Open
**Roadmap:** [SRS_IMPLEMENTATION_ROADMAP.md](../SRS_IMPLEMENTATION_ROADMAP.md) Testing Tier 1 §T1.5
**Effort:** 3–5 days
**Depends on:** Nothing (can run in parallel)

## Summary

Establish baseline automated coverage for report-server core flows: queueing, report mapping, PDF/XLSX generation, webhook callbacks, and storage integration.

## Acceptance Criteria

- [ ] Add test infrastructure for `apps/report-server` if missing (runner config, test script, environment setup).
- [ ] Queue/worker behavior is tested:
  - request validation
  - queue ordering expectations
  - concurrency limiting behavior
- [ ] Committee mapping helpers are tested for expected output shape.
- [ ] XLSX generation tests cover column mapping and data formatting.
- [ ] PDF generation path is tested with browser/rendering dependency mocked.
- [ ] Webhook callback signing/payload behavior is tested.
- [ ] S3 utility interactions are tested with mocked client behavior.
- [ ] Failure-path tests cover external dependency failures (rendering/storage/webhook).

## Implementation Notes

- **Files to test:**
  - `apps/report-server/src/index.ts`
  - `apps/report-server/src/committeeMappingHelpers.ts`
  - `apps/report-server/src/xlsxGenerator.ts`
  - `apps/report-server/src/utils.ts`
  - `apps/report-server/src/webhookUtils.ts`
  - `apps/report-server/src/s3Utils.ts`
- Mock network/storage/browser dependencies; keep tests hermetic and CI-safe.

## Related

- [SRS_IMPLEMENTATION_ROADMAP.md](../SRS_IMPLEMENTATION_ROADMAP.md) Testing Tier 1 §T1.5
- [3.0 Report-server Migration](3.0-report-server-committee-membership-migration.md)
- [3.0a Report Audit](3.0a-report-audit-committee-membership.md)

