# 4.4 Scenario 4: Petition Outcome Lifecycle + Traceability

**Status:** Done  
**Priority:** P2  
**Effort:** 3-4 days  
**Depends on:** [2.6 Petition + Primary Outcome Tracking](2.6-petition-primary-outcome-tracking.md), [3.4 Vacancy, Changes, and Petition Outcomes Reports UI](3.4-vacancy-changes-petition-reports-ui.md)

## Summary

Resolve petition-lifecycle ambiguity and improve candidate-level traceability in both workspace UX and audit records.

## Acceptance Criteria

### Canonical Petition Status Model

- [x] `PETITIONED_WON` is either fully implemented or removed; no dead/unused lifecycle enum values remain.
- [x] Status handling in Prisma schema, petition outcome routes, and report mapping helpers is consistent with the canonical model.
- [x] Documentation in `docs/SRS` is updated to match implemented lifecycle semantics.

### Candidate-Level Audit Clarity

- [x] Petition outcome recording emits explicit per-candidate audit metadata containing candidate id, seat number, outcome (`WON|UNOPPOSED|LOST|TIE`), and vote count where provided.
- [x] Audit trails allow reconstruction of why each petition candidate was or was not activated.

### Workspace Discoverability

- [x] Committee workspace provides direct navigation to relevant petition outcome context for the selected committee/LTED.
- [x] Staff can view exclusion context (`lost`, `tie`, etc.) without manually rebuilding filters.

### Tests

- [x] API tests verify canonical status transitions and report-output consistency for won/lost/tie outcomes.
- [x] API tests verify per-candidate audit payload shape for all outcome types.
- [x] UI test verifies committee workspace link-out to filtered petition outcome context.

## Implementation Notes

- Canonical petition lifecycle model is now:
  - Winner / unopposed winner: `status=ACTIVE`, `membershipType=PETITIONED`
  - Lost: `status=PETITIONED_LOST`
  - Tie: `status=PETITIONED_TIE`
- `PETITIONED_WON` was removed from Prisma schema and migrated to `ACTIVE` for any legacy rows.
- Petition outcome audit logging now records per-candidate `PETITION_RECORDED` metadata:
  - `candidateVoterRecordId`, `seatNumber`, `outcome`, `voteCount`
  - `resultingStatus`, `activated`, and `exclusionReason` when not activated
- Committee workspace now includes:
  - a direct link to `/admin/petition-outcomes` with selected committee/term query params
  - an exclusion context panel showing lost/tie rows without manual filter rebuild

## Related

- [SCENARIO_4_PETITION_OUTCOMES_MISSING_2026-02-23.md](../scenario-gaps/SCENARIO_4_PETITION_OUTCOMES_MISSING_2026-02-23.md)
