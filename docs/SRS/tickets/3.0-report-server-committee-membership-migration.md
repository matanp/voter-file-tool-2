# 3.0 Report-server: Migrate ldCommittees to CommitteeMembership

**Status:** Open
**Roadmap:** [SRS_IMPLEMENTATION_ROADMAP.md](../SRS_IMPLEMENTATION_ROADMAP.md) §3.0
**Effort:** 1–2 days
**Depends on:** [1.2 CommitteeMembership Model](1.2-committee-membership-model.md)

## Summary

Migrate the `ldCommittees` report data source in report-server from legacy `committeeMemberList` access patterns to `CommitteeMembership` (`status=ACTIVE`) so report generation remains correct after membership-model migration.

## Acceptance Criteria

- [ ] `fetchCommitteeData()` reads `CommitteeList` with `memberships` filtered to `status=ACTIVE` and includes `voterRecord`.
- [ ] `CommitteeWithMembers` type is updated to represent `memberships` (not `committeeMemberList`).
- [ ] `mapCommitteesToReportShape()` consumes the new `memberships` shape end-to-end.
- [ ] Report-server routes for `ldCommittees` no longer reference `committeeMemberList`.
- [ ] Shared validator/report types are updated if they still encode `committeeMemberList`.
- [ ] `ldCommittees` PDF and XLSX output are validated against pre-migration baseline for equivalent data.
- [ ] Existing `ldCommittees` tests are updated (or added) for new data shape.

## Implementation Notes

- **Core files:**
  - `apps/report-server/src/index.ts`
  - `apps/report-server/src/committeeMappingHelpers.ts`
  - `apps/report-server/src/components/CommitteeReport.tsx`
  - `apps/report-server/src/utils.ts`
  - `apps/report-server/src/xlsxGenerator.ts`
- **Shared types:**
  - `packages/shared-validators/src/schemas/report.ts`
  - `packages/shared-validators/src/index.ts`
- Keep output format stable; this ticket is data-source migration, not report redesign.

## Related

- [SRS_IMPLEMENTATION_ROADMAP.md](../SRS_IMPLEMENTATION_ROADMAP.md) §3.0, §3.0a
- [1.R.5 Source-of-Truth Split](1.R.5-source-of-truth-split.md)
- [3.0a Audit and Update All Reports](3.0a-report-audit-committee-membership.md)

