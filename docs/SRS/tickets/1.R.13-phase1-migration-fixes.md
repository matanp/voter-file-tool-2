# 1.R.13 Phase 1 Migration / Schema Fixes (P2)

**Status:** Open
**Priority:** P2 — Medium
**Effort:** 1 day
**Depends on:** [1.1c Committee Governance Config](1.1c-committee-governance-config.md), [1.1 Committee Term Model](1.1-committee-term-model.md), [1.5 Audit Trail Infrastructure](1.5-audit-trail-infrastructure.md)

## Summary

Address schema and migration follow-ups identified in code review: NOT NULL for `CommitteeGovernanceConfig.nonOverridableIneligibilityReasons`, CommitteeTerm default label en-dash → ASCII hyphen, and AuditLog `userId` nullable for system-generated entries. Optionally document or enforce backfill policy by request status. All changes via **new** Prisma migrations only; do not edit existing migration.sql files.

## Acceptance Criteria

- [ ] Add a new migration that runs `ALTER TABLE "CommitteeGovernanceConfig" ALTER COLUMN "nonOverridableIneligibilityReasons" SET NOT NULL;` (after ensuring no nulls exist).
- [ ] Add a new migration that runs `UPDATE "CommitteeTerm" SET "label" = '2024-2026' WHERE "id" = 'term-default-2024-2026';` (ASCII hyphen; do not edit original migration).
- [ ] Add a new migration that alters `"AuditLog"."userId"` to DROP NOT NULL; update Prisma schema to `userId String?` and regenerate.
- [ ] (Optional) If restricting backfill by request status: add follow-up migration or script and document policy (e.g. only APPROVED/PENDING).

## Implementation Notes

- **Files:** New migration files under `apps/frontend/prisma/migrations/`, [apps/frontend/prisma/schema.prisma](apps/frontend/prisma/schema.prisma) for AuditLog.userId.
- Do not modify existing migration.sql files per .cursorrules.

## Related

- [FINDINGS_AND_RESOLUTION_REGISTER.md](../FINDINGS_AND_RESOLUTION_REGISTER.md) (Findings 2, 3, 4, 5)
