# 1.R.14 handleRequest Capacity Check for Replacement (P2)

**Status:** Open
**Priority:** P2 â€” Medium
**Effort:** 0.5 day
**Depends on:** [1.2 CommitteeMembership Model](1.2-committee-membership-model.md), [1.4 Seat Model](1.4-seat-model.md)

## Summary

The capacity check in `handleRequest` (accept) rejects when `activeCount >= config.maxSeatsPerLted` without accounting for a pending replacement (`removeMemberId`). Valid replacement requests can be incorrectly blocked. This ticket computes an effective active count (or validates and re-counts after removal) so replacements are allowed when the member being removed frees a seat.

## Acceptance Criteria

- [ ] Before the capacity check, compute effective active count: e.g. `effectiveActiveCount = activeCount - (removeMemberId ? 1 : 0)`, or perform removal of the member being replaced then re-count.
- [ ] Validate `removeMemberId`: same committee, ACTIVE status, not the incoming membership.
- [ ] Use the effective count (or post-removal count) for the capacity comparison against `maxSeatsPerLted`.
- [ ] Add or extend tests for accept-with-replacement when at capacity.

## Implementation Notes

- **Files:** [apps/frontend/src/app/api/committee/handleRequest/route.ts](apps/frontend/src/app/api/committee/handleRequest/route.ts) (around capacity check and removeMemberId handling).

## Related

- [FINDINGS_AND_RESOLUTION_REGISTER.md](../../FINDINGS_AND_RESOLUTION_REGISTER.md) (Finding 9)
